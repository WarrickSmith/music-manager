# Music Manager Data Model

## Database: MusicManagerDB

The application uses Appwrite as its backend service with the following data structure.

### Collections

#### 1. Competitions Collection

Stores information about music competitions.

| Attribute | Type | Required | Description |
|-----------|------|----------|-------------|
| id | string | Yes | Unique identifier (auto-generated by Appwrite) |
| name | string | Yes | Name of the competition |
| year | integer | Yes | Year the competition takes place |
| active | boolean | Yes | Whether the competition is currently active |

#### 2. Grades Collection

Stores information about different grades or levels within competitions.

| Attribute | Type | Required | Description |
|-----------|------|----------|-------------|
| id | string | Yes | Unique identifier (auto-generated by Appwrite) |
| name | string | Yes | Name of the grade (e.g., "Beginner", "Intermediate") |
| category | string | Yes | Category classification (e.g., "Junior", "Senior") |
| segment | string | Yes | Segment type (e.g., "Solo", "Group") |
| competitionId | string | Yes | Reference to the parent competition |

#### 3. Music Files Collection

Tracks music files associated with competitions with comprehensive metadata.

| Attribute | Type | Required | Description |
|-----------|------|----------|-------------|
| id | string | Yes | Unique identifier (auto-generated by Appwrite) |
| originalName | string | Yes | Original filename uploaded by the user |
| fileName | string | Yes | Name of the file in the system |
| storagePath | string | Yes | Path to the file in the storage system |
| downloadURL | string | Yes | URL to download the file |
| competitionId | string | Yes | Reference to the associated competition |
| competitionName | string | Yes | Name of the competition (denormalized) |
| competitionYear | integer | Yes | Year of the competition (denormalized) |
| gradeId | string | Yes | Reference to the associated grade |
| gradeType | string | Yes | Type of the grade (denormalized) |
| gradeCategory | string | Yes | Category of the grade (denormalized) |
| gradeSegment | string | Yes | Segment of the grade (denormalized) |
| userId | string | Yes | ID of the user who uploaded the file |
| userName | string | Yes | Name of the user who uploaded the file (denormalized) |
| uploadedAt | string | Yes | Timestamp when the file was uploaded |
| duration | integer | No | Duration of the music file in seconds (if available) |
| size | integer | Yes | Size of the file in bytes |
| status | string | Yes | Current status of the file (e.g., "processing", "ready", "error") |

### Storage

#### MM Files Bucket (ID: mmfiles)

Storage bucket for all music-related files with the following permissions:
- Read: Any role
- Write: Any role

## Entity Relationships

```
Competition (1) ───────┐
                       │
                       ▼
                  Grade (*)
                       │
                       │
                       ▼
                Music File (*)
```

1. A Competition can have multiple Grades
2. A Grade can have multiple Music Files
3. Grades are associated with a specific Competition
4. Music Files are associated with both a specific Competition and a specific Grade
5. Music Files are also associated with the User who uploaded them

## Data Denormalization

The Music Files collection uses denormalization to improve query performance:
- Competition details (name, year) are duplicated in the Music Files record
- Grade details (type, category, segment) are duplicated in the Music Files record
- User details (name) are duplicated in the Music Files record

This approach reduces the need for multiple queries when retrieving music file information.

## Authentication & Permissions

The current setup allows any role to read and write to all collections and the storage bucket. In a production environment, you may want to implement more restrictive permissions based on user roles.
